 # 基于大语言模型的用户行为情报研判方法研究:可解释性分析视角（2025-07-21）

研究对象
研究领域: 用户行为情报、可解释性人工智能 (XAI)、教育情报。
核心对象: 在线学习平台用户的行为识别与情报研判。
数据来源:
    平台: MOOC 在线学习平台。
    样本: 采集自 9000 名用户的行为数据，包含文本评论与时间序列交互信息。

研究方法
自动化数据采集:
    模型/工具: 使用本地部署的 DeepSeek-R1-671B 大语言模型，结合 n8n 工作流平台，实现对 MOOC 平台多源异构数据（评论、日志等）的自动化采集。
    关键技术: 引入 检索增强生成 (RAG) 机制，通过调用外部知识库增强 LLM 对特定教育领域的理解能力和知识时效性。
特征工程与数据融合:
    语义与情感分析: 采用 BERT 模型提取用户评论文本的语义表示，并进行情感分类（积极/消极）。利用 对数几率空间 (Log-Odds Ratio) 分析情感词偏好，并通过 Softmax 层输出情感概率。
    多源数据融合: 将三种不同来源的特征进行拼接（Concatenation），形成统一的结构化特征向量用于模型训练。这三类特征包括：
        文本语义向量 (BERT 嵌入)。
        时间序列统计特征 (如均值、方差)。
        情感特征向量 (情感分类概率与 SHAP 贡献值)。
行为分类模型:
    算法: 选用 LightGBM (轻量级梯度提升机)作为核心分类器，用于识别用户行为模式（如课程是否完成）。
    用途: 因其在处理大规模、高维数据时的高效率和高性能，被用于构建最终的分类模型。模型训练基于梯度提升决策树，同时优化一阶和二阶梯度信息。
可解释性分析:
    算法: 引入 SHAP (Shapley Additive Explanations) 方法对 LightGBM 模型的输出结果进行解释。
    用途: 量化每个输入特征（如完成率、情感得分）对最终预测结果的贡献度，通过全局和局部两种视角（如 SHAP 条形图、力图）来揭示模型决策的内部机制，实现“过程可信、结果可用”。
    前提假设: SHAP 假定特征贡献可以通过计算其在所有可能特征组合中的边际贡献平均值（Shapley 值）来公平分配。

研究出发点与创新性
背景与动机:
    技术演进: 人工智能，特别是大语言模型（LLM）的发展，为实现自动化和高语义理解的用户行为分析提供了新机遇。
    现实需求: 传统用户行为分析方法（如规则匹配、静态统计）难以挖掘复杂场景下的行为模式，且普遍缺乏可解释性，导致模型在智能情报决策中的应用价值和可信度受限。
    问题挑战: 在线教育平台产生了海量、异构的用户数据，但现有研究在多源数据融合、模型可解释性以及 LLM 领域适应性方面存在不足。
创新点:
    理论创新: 将智能情报分析范式引入教育行为建模，探索了在复杂数据环境下融合 LLM 与 XAI 的方法，以实现对用户行为动因、情感态度和认知意图的深度解析。
    实践创新: 构建了一套集数据采集、特征建模、行为识别与结果解释于一体的、具备可迁移性和可解释性的用户行为分类系统，为智能教育平台的用户画像、风险预警和个性化推荐提供了直接的技术支撑与实证依据。
    方法创新: 提出了一种融合 RAG 增强的 LLM、LightGBM 分类器和 SHAP 解释框架的综合路径，有效解决了动态行为轨迹识别、多源特征融合以及情绪-行为耦合建模中的技术难题。

详细研究内容
4.1 相关研究 (相关研究)
用户行为情报分析: 现有研究多依赖统计特征，虽有引入情感分析或深度学习的尝试，但常将情感与行为特征割裂，导致对行为动因的解释能力有限。
可解释性人工智能 (XAI) 应用: LightGBM 等集成模型性能强大但属于“黑箱”，限制了其在决策场景的应用。虽有研究引入 SHAP 等 XAI 方法，但在 LLM 驱动的多源情报研判场景下，尚缺乏系统性的集成框架。
LLM 与行为情报建模融合: LLM 在语义理解上有优势，但其封闭性、知识滞后和“黑箱”属性是应用障碍。结合 RAG 和 XAI 是一个前沿方向，但在动态行为和多源特征融合上仍需有效方案。

4.2 研究内容 (研究内容)
总体框架: 提出了一个包含数据采集、预处理、特征提取、模型训练和行为检测五个阶段的总体架构。
自动化数据采集: 使用 DeepSeek 大模型和 n8n 自动化平台，通过 RAG 机制增强领域知识，从 MOOC 平台抓取数据。预处理流程包括基于信息熵和 TF-IDF 的噪声过滤、基于结构相似度的页面去重、以及基于 BERT 嵌入余弦相似度的语义去重。
语义与情感分类:
    使用 BERT 对课程评论进行情感分析。
    通过 Softmax 函数 $P(y|X)=\frac{e^{w_{h}h+b_{i}}}{\sum_{j}e^{w_{h+b_{j}}}}$ 计算情感分类概率。
    使用对数几率 $LOR(w)=log(\frac{P(w|C_{1})}{P(w|C_{2})})$ 分析词语的情感偏向。
    引入 SHAP 算法 $\varphi_{i}=\sum_{S\subseteq N|i|}\frac{|S|!(|N|-|S|-1)!}{|N|!}(f(S\cup|i|) -f(S))$ 来衡量词语对情感分类的贡献度。
多源数据融合:
    将文本、时间序列和情感三类数据拼接成统一特征向量 $X=[X_{text},X_{\dot{m}me},X_{sentiment}]$。
    时间序列数据通过计算滑动窗口的均值 $\mu$ 和方差 $\sigma^{2}$ 等进行特征提取。
行为分类与分析:
    采用 LightGBM 模型进行行为分类，该模型利用梯度和二阶梯度信息优化决策树，并通过直方图算法提升效率。
可解释性分析:
    运用 SHAP 对 LightGBM 的分类结果进行解释，通过可视化方法（力图、条形图）呈现各特征对预测的贡献，以增强模型的透明度。

4.3 实验与结果 (实验与结果)
数据集与特征:
    数据源为 MOOC 平台，共 9000 条用户样本，按 7:3 划分为训练集和测试集。
    特征体系包括两大类：学习行为特征（如花费时间、测验分数、完成率）和情感特征（如句情感分、积极/消极情绪得分）。所有数据均经过匿名化和标准化处理。
参数设置:
    实验环境为 RTX A5000 GPU，Python 3.7。
    LightGBM 模型通过网格搜索和 5 折交叉验证进行调优，关键超参数设置为：学习率 0.01，最大叶节点数 50，树最大深度 10，迭代次数 300。
评估指标: 采用准确率 (Accuracy)、召回率 (Recall) 和 F1 分数 (F1-score) 作为模型性能评估标准。
对比模型: 选取了包括线性模型、决策树、朴素贝叶斯和集成学习（Bagging、Boosting）在内的四大类共 15 个主流分类模型进行性能对比。
实验结果:
    多模型对比: 本文提出的融合学习行为与情感特征的 LightGBM 模型在准确率 (99.52%)、召回率 (99.98%) 和 F1 值 (99.27%) 上全面超越所有 15 个基准模型。
    消融实验: 证明了多源特征融合的有效性。与仅使用行为特征的模型相比，融合模型的准确率提升了 3.50%；与仅使用情感特征的模型相比，准确率提升了 3.03%。
    可解释性分析:
        全局解释 (SHAP 摘要图): 分析显示，“完成率”是最关键的预测变量。融合情感特征后，“情感得分”和“句情感分”也成为重要的预测因子，且模型对特征的敏感度整体提升。
        局部解释 (SHAP 力图): 通过案例分析发现，对于“未完成”用户，其低完成率和负面情感是预测结果的主要负向驱动力；而对于“已完成”用户，高完成率和积极情感是主要的正向驱动力，清晰地展示了个体预测的决策路径。

4.4 讨论 (讨论)
数据规模的影响: 通过对比 1000 和 3000 样本量的实验发现，数据规模对模型稳定性至关重要。小样本量下，特征重要性（SHAP 值）波动大，模型鲁棒性差；增加样本量后，SHAP 解释趋于稳定，模型判别边界更稳固，泛化性能和解释一致性更高。
不同特征的贡献分析:
    阶段性主导特征: 存在一个“阶段性主导特征迁移机制”。情感特征在学习初期（低完成率阶段）预测价值更高，主要起驱动作用；而行为特征（如测验分数）在学习中后期贡献更为显著和稳定。
    特征的非线性效应: “花费时间”呈现非对称影响，在低完成率用户中，高投入时间可能反而对应低学习效率，说明行为效率比单纯的时长更重要。

研究结论
主要结论:
    本文构建的融合大语言模型与可解释性分析的用户行为情报研判模型是有效的，在准确率、召回率和 F1 值上均表现优异。
    将用户的行为特征与情感特征进行融合，能够显著提升模型预测的准确性和稳定性。
    SHAP 可解释性分析表明，“任务完成率”、“情感得分”和“测验成绩”是影响用户行为模式的关键情报因子。
    用户的情绪状态在行为预测中扮演着阶段性的主导角色，尤其在学习初期对用户的持续性行为有重要引导作用。
实践意义:
    研究成果提升了用户行为预测的准确性与透明度，为平台构建可信、可追溯的用户画像和智能推荐服务提供了方法论支持。
    结论启示平台可在用户学习的不同阶段采取差异化干预策略：初期侧重情感感知与激励，中后期侧重基于行为表现的目标引导。
未来工作:
    将该方法拓展至社会化情报场景，如利用 LLM 进行社交媒体舆情监测和情感追踪。
    引入图像、语音等多模态数据源，构建跨模态用户行为情报分析框架，以拓宽其在智能推荐、态势感知等领域的应用。